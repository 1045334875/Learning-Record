### 任务

1. 先按默认不跳转，如果在mem阶段发现要跳转，那就清空id段，ex段的状态寄存器。如果在mem阶段发现不跳转那就不管。
   1. 不在wb判断是为了把下一条指令拦在mem之前，不让他们对ram进行操作。
   
2. 数据前递不能解决的冲突：load word指令，必须插入一个bubble，在mem阶段后半周期读出之后，通过数据前递，将要写回的值给ex阶段，
   1. 此时数据前递的bubble在ld后一条语句，ld整个周期没有影响，空的bubble是因为ld的值还没拿出来，下一条语句你拿的是我错误的值，所以别急，在等一个周期才是正确的值。
   2. 如何判断数据需要前递来插入bubble，ld指令在ex阶段，下一个指令在id阶段，这个时候才能知道下一条指令要读的寄存器和ld指令要改的冲突了，这时候直接插1个bubble，然后在ld到mem之后把数据前递回去，所以说，插入bubble也是在ex和id阶段之间，下一条指令需要被困在ex，一次无效运行一次有效运行。if，id有两条新指令
   3. forward是有优先级的，先就近判断mem，再判断wb
   4. ~~bubble必须空两个周期，让ld的数据到wb阶段再返回，不然，id和mem冲突的话，mem里的回不去~~
      1. ~~如果先mem再wb，那么当有空格插入的时候，我希望用wb的指令，可是mem的reg是它自己，没有用的它自己的重复~~
      2. ~~如果先wb再mem，那么如果wb改了，mem也改了，那就不行~~
      3. ~~空一个的话，应该是wb阶段前递~~~~
   5. 发现必须再来一个信号bubble_clear
   5. 要判断下一个插bubble的地方不跳转，如果跳转那么插bubble会影响跳转
   5. 
   
3. ##### 把forwarding写好看一点




### 11.9  0:33 问题

1. ID_EX阶段的clk应该是怎么搞，它现在rst都不认识了，很怪
2. ID_EX阶段的赋值有的语句被改成阻塞赋值了
3. mux3里面有clear的次数问题，建议调整一下
4. 误伤了forwardingControl，改成了组合现在又改回了时序posedge
4. 赋值为何赋不上的问题进行了搜索，排除因为clk，if的语法问题。

#### 11.10 23：44出现新的问题

![image-20211109234452364](C:\Users\86181\AppData\Roaming\Typora\typora-user-images\image-20211109234452364.png)

不对应该是整个那个没理通，把汇编跑一遍，每一个事件和数值算出来。应该就是会隔周期的。

